<!DOCTYPE html>
<html>
  <head>
      <title>Product Suppliers</title>
  </head>
  <body>
      <h1>Product Suppliers</h1>
      {{error_message}}
      <table>
        <tr>
          <th>Product name</th>
          <th>Supplier name</th>
        </tr>
        {% for prod in product_suppliers %}
        {% with product_supplier=prod.ProductSuppliers %}
        {% with product1=prod.Products %}
        {% with supplier1=prod.Suppliers %}
          <form method="POST">
            <tr>
              <input type="hidden" name="id" value={{product_supplier.product_supplier_id}}>
              <td> {{product_supplier.product_supplier_id}}</td>
              <td> <select name="product_id">
                <option value={{product1.product_id}} selected hidden>{{product1.product_name}}</option>
                {% for product in products %}
                <option value={{product.product_id}}>{{product.product_name}}</option>
                {% endfor %}
              </select></td>
              <td> <select name="supplier_id">
                <option value={{supplier1.supplier_id}} selected hidden>{{supplier1.supplier_name}}</option>
                {% for supplier in suppliers %}
                <option value={{supplier.supplier_id}}>{{supplier.supplier_name}}</option>
                {% endfor %}
              </select></td>               
              <td> <button type="submit" name="_method" value="PUT">Update</button></td>
              <td> <button type="submit" name="_method" value="DELETE">Delete</button></td>
            </tr>
          </form>
        {% endwith %}
        {% endwith %}
        {% endwith %}
        {% endfor %}
        <form method="POST">
          <td></td>
          <td> <select name=product_id>
            <option value="" selected disabled hidden>Choose a value</option>
            {% for product in products %}
            <option value={{product.product_id}}>{{product.product_name}}</option>
            {% endfor %}
          </select></td> 
          <td> <select name=supplier_id>
            <option value="" selected disabled hidden>Choose a value</option>
            {% for supplier in suppliers %}
            <option value={{supplier.supplier_id}}>{{supplier.supplier_name}}</option>
            {% endfor %}
          </select></td> 
          <td> <button type="submit" name="_method" value="PUT">Add</button></td>
        </form>
      </table>
      <form action="/navigate" method="get">
        <button type="submit" name="page" value="/">Main page</button>
      </form>
  </body>
</html>
