<!DOCTYPE html>
<html>
  <head>
      <title>Order Items</title>
  </head>
  <body>
      <h1>Order Items</h1>
      {{error_message}}
      <table>
        <tr>
          <th>Order</th>
          <th>Item</th>
          <th>Quantity</th>
          <th>Price</th>
        </tr>
        {% for ord in order_items %}
          {% with order_item=ord.OrderItems %}
          {% with order1=ord.Orders %}
          {% with product1=ord.Products %}

          <form method="POST">
            <tr>
              <input type="hidden" name="id" value={{order_item.order_item_id}}>
              <td> {{order_item.order_item_id}}</td>
              <td> <select name="order_id">
                <option value={{order1.order_id}} selected hidden>{{order1.order_id}}</option>
                {% for order in orders %}
                <option value={{order.order_id}}>{{order.order_id}}</option>
                {% endfor %}
              </select> </td>
              <td> <select name="product_id">
                <option value={{product1.product_id}} selected hidden>{{product1.product_name}}</option>
                {% for product in products %}
                <option value={{product.product_id}}>{{product.product_name}}</option>
                {% endfor %}
              </select> </td> 
              <td> <input type=number step=1 name=quantity value={{order_item.quantity}}>  </td>
              <td> <input type=number step=0.01 name=price value={{order_item.price}}> </td>
              <td> <button type="submit" name="_method" value="PUT">Update</button></td>
              <td> <button type="submit" name="_method" value="DELETE">Delete</button></td>
            </tr>
          </form>
          {% endwith %}
          {% endwith %}
          {% endwith %}
        {% endfor %}
        <form method="POST">
          <td></td>
          <td> <select name="order_id">
            <option value="" selected hidden disabled>Choose a value</option>
            {% for order in orders %}
            <option value={{order.order_id}}>{{order.order_id}}</option>
            {% endfor %}
          </select> </td>
          <td> <select name="product_id">
            <option value="" selected hidden disabled>Choose a value</option>
            {% for product in products %}
            <option value={{product.product_id}}>{{product.product_name}}</option>
            {% endfor %}
          </select> </td> 
          <td> <input type=number step = 1 name=quantity value=0>  </td>
          <td> <input type=number step=0.01 name=price value=0.00> </td>
          <td> <button type="submit" name="_method" value="PUT">Add</button></td>
        </form>
      </table>
      <form action="/navigate" method="get">
        <button type="submit" name="page" value="/">Main page</button>
      </form>
  </body>
</html>
